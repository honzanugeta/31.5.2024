<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/images/potraviny.ico">
    <link href="./output.css" rel="stylesheet">
    <title>Zaregristovat se</title>
</head>
<style>
     body {
        cursor: url("/Images/purplecat.cur"), auto;
                    }
</style>
<body>
    <body class="bg-gradient-to-r from-pink-500 to-yellow-500 h-full w-full min-h-screen flex flex-col">
        <!-- Pod t√≠mto je Register str√°nka -->
        <div class="flex flex-col justify-center items-center min-h-screen">
            <p class="text-3xl font-semibold">V√≠tejte v na≈°em Eshopu</p>
            <div class="w-full max-w-md bg-gradient-to-tr from-orange-500 to-yellow-500 rounded-md shadow-md px-8 py-6 justify-center items-center flex flex-col drop-shadow-2xl"> 
                <div class="pb-8"> 
                    <p class="text-4xl text-white font-mono">Zaregistruj se</p>
                </div>
                <label for="jmeno" class="text-3xl">Jm√©no</label>
                <input type="text" name="jmeno" id="jmeno" autocomplete="off" class="px-8 py-1 rounded-full mb-4" placeholder="Jm√©no">
                <label for="heslo" class="text-3xl">Heslo</label> 
                <div class="flex items-center mb-4 relative">
                    <input type="password" pattern=".{8,}" id="heslo" autocomplete="off" class="px-8 py-1 rounded-full w-full" placeholder="Heslo">
                    <button onclick="UkazHeslo()" class="absolute inset-y-0 right-0 pr-3 flex items-center">
                        <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0zm-3-7a9 9 0 019 9 9 9 0 01-18 0 9 9 0 019-9z" />
                        </svg>
                    </button>  
                </div>
                <label for="email" class="text-3xl">Email</label>
                <input type="email" name="email" id="email" placeholder="Email pros√≠m üòá" class="px-8 py-1 rounded-full mb-4">
                <button id="Zaregistrovat" class="px-4 py-2 rounded-full bg-gradient-to-tr from-lime-400 via-orange-400 to-amber-400 font-medium text-2xl transition duration-300 ease-in-out transform hover:scale-105">Zaregistrovat</button>
            </div>
            <div class="inline-flex items-center pt-3">
                <p class="pr-4">M√°≈° √∫ƒçet?</p>
                <button class="bg-gradient-to-tr from-amber-300 to-orange-600 rounded-full px-2 py-1 font-medium text-l transition duration-300 ease-in-out transform hover:scale-105" id="prihlasit">P≈ôihl√°sit</button>
            </div>
        <div id="message"></div> <!-- Zde se zobraz√≠ zpr√°va o registraci -->

        </div>

        <script>
     document.getElementById("Zaregistrovat").onclick = async function () {

        const message = document.getElementById('message');


        var username =document.getElementById('jmeno').value;
        var password = document.getElementById('heslo').value;
        var email = document.getElementById('email').value;


        try {
            const response = await fetch('http://localhost:5145/api/User/registration', {
            method: 'POST',
            headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ username, password, email })
        });

        const result = await response.text(); 

        if (!response.ok) {
            throw new Error(result); 
        }

        message.textContent = ""; 

        if (response.status === 200) {
            location.href = "index.html";
        }
        } catch (error) {
            console.error('Chyba p≈ôi registrov√°n√≠ u≈æivatele:', error);
            message.textContent = error.message ; // Zobrazen√≠ chybov√© zpr√°vy
        }


}
            document.getElementById("prihlasit").onclick = function () {
                location.href = "index.html";
            }
            function UkazHeslo() {
                var heslo = document.getElementById("heslo");
                if (heslo.type === "password") {
                heslo.type = "text";
             } else {
                heslo.type = "password";
            }
            }


        </script>
</body>
</html>